From 946d0afdcc34f461c68396b4b377832bcdccf095 Mon Sep 17 00:00:00 2001
From: Cristy <mikayla-grace@urban-warrior.org>
Date: Thu, 25 Feb 2021 19:34:36 -0500
Subject: [PATCH] https://github.com/ImageMagick/ImageMagick/issues/3296

---
 magick/fx.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/magick/fx.c b/magick/fx.c
index 5041de6..6fedf83 100644
--- a/magick/fx.c
+++ b/magick/fx.c
@@ -5702,7 +5702,7 @@ MagickExport Image *WaveImage(const Image *image,const double amplitude,
     }
   for (i=0; i < (ssize_t) wave_image->columns; i++)
     sine_map[i]=(float) fabs(amplitude)+amplitude*sin((double)
-      ((2.0*MagickPI*i)/wave_length));
+      ((2.0*MagickPI*i)*PerceptibleReciprocal(wave_length)));
   /*
     Wave image.
   */
-- 
2.23.0

