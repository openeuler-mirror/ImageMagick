From 90255f0834eead08d59f46b0bda7b1580451cc0f Mon Sep 17 00:00:00 2001
From: Cristy <mikayla-grace@urban-warrior.org>
Date: Wed, 6 Jan 2021 18:12:06 -0500
Subject: [PATCH] https://github.com/ImageMagick/ImageMagick/issues/3077

---
 magick/gem.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/magick/gem.c b/magick/gem.c
index b18b69ec4..cb694cfef 100644
--- a/magick/gem.c
+++ b/magick/gem.c
@@ -1580,7 +1580,7 @@ MagickExport double GenerateDifferentialNoise(RandomInfo *random_info,
         beta=GetPseudoRandomValue(random_info);
         alpha*=beta;
       }
-      noise=(double) (QuantumRange*i/SigmaPoisson);
+      noise=(double) (QuantumRange*i*PerceptibleReciprocal(SigmaPoisson));
       break;
     }
     case RandomNoise:
